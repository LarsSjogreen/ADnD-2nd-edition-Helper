<html>
<head>
  <title>{{ title }}</title>
  <script src="js/vue.js"></script>
  <script src="js/jquery-3.2.1.min.js"></script>
  <link rel="stylesheet" href="css/style.css"/>
</head>
<body>
  <div id="app">
    <ul class="menu">
      <li class="menuItem" v-for="(item, itemKey) in menu">
        <span v-on:mouseOver="mouseOver" v-on:mouseOut="mouseOut">{{ itemKey }}</span>
        <ul v-on:mouseOver="mouseOver" v-on:mouseOut="mouseOut" class="subMenu" v-show="active" class="menuSubItem">
          <li v-on:mouseOver="mouseOver" v-on:mouseOut="mouseOut" class="subMenuItem" v-for="(subItem, subItemKey) in item">
            <a  v-on:mouseOver="mouseOver" v-on:mouseOut="mouseOut" v-bind:href='subItem'>{{ subItemKey }}</a>
          </li>
        </ul>
      </li>
    </ul>
  </div>
</body>

<script type="text/javascript">
var app = new Vue({
  el: '#app',
  data: {
    title: 'AD&D Helper',
    menu: 'Loading...',
    active: false
  },
  methods: {
    mouseOver: function() {
      this.active = true;
    },
    mouseOut: function() {
      this.active = false;
    }
  },
  mounted: function() {
      var self = this;
      $.ajax({
        url: '/menu',
        complete: function(data) {
          console.log(data.responseJSON);
          self.menu = data.responseJSON;
        },
        error: function() {
          console.log('Error');
        }
      })
    }
  });
</script>

</html>
